/*! form-warden 2.0.17 */
!function(a){"function"==typeof define?define(a):"object"==typeof exports?a(require,exports):a(void 0,fw={})}(function(a,b){"use strict";var c=a?a("path"):null,d=a?a("fs"):null,e=Object.prototype.hasOwnProperty,f=Array.prototype.forEach,g=Array.prototype.slice,h={},i=function(a,b,c){if(null!=a)if(f&&a.forEach===f)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,g=a.length;g>d;d++)if(d in a&&b.call(c,a[d],d,a)===h)return}else for(var i in a)if(e.call(a,i)&&b.call(c,a[i],i,a)===h)return},j=function(a){return i(g.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},k={required:function(a){return void 0===a||null===a?!0:a.length||""!==a},email:function(a){return a?a.match(/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i):!0},ssn:function(a){return a?a.match(/\b[0-9]{3}-[0-9]{2}-[0-9]{4}\b/):!0},date:function(a){return a?a.match(/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}/):!0},iso8601:function(a){return a?a.match(/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/):!0},maxLength:function(a,b,c){return a?a.length<=c.length:!0},minLength:function(a,b,c){return a?a.length>=c.length:!0}},l=function(a,b,c,d){if(!c)return!0;for(var e=a[b],f=c.push?!1:!0,g=f?c.validations:c,h=0;h<g.length;h++){var i=g[h];if("function"==typeof i.isValid){if(!i.isValid(e,a))return i.message||b+" is invalid"}else if(i.isValid.test){var j=i.isValid;if(!j.test(e))return i.message||b+" is invalid"}else{var k=d[i.isValid];if(k){if(!k(e,a,i))return i.invalid&&i.invalid(),i.message||b+" is invalid";i.valid&&i.valid()}else console.log("Validation Function not found: "+i.isValid)}}return""},m=function(a,b){return b&&b.isVisible&&"function"==typeof b.isVisible&&!b.isVisible(a)?!1:!0};b.validateForm=function(a,b){var c={},d=!0,f=j(k,b.validators||{});return i(b.fields,function(e,g){var h,i=m(a,e),j=l(a,g,e,f,b.conventionBased),k=!i||i&&""===j;d&=k,h={visible:i,error:j,valid:!!k},h&&(c[g]=h)}),i(a,function(g,h){if(b.conventionBased&&""!=g)for(var i in f)if(h.indexOf(i)>-1){var j=!!f[i](g,a),k=j?"":f[i].message||h+" is invalid";c[h]={visible:!0,error:k,valid:j},d&=j}e.call(c,h)||(c[h]={visible:!0,error:"",valid:!0})}),{fields:c,validForm:!!d}},b.getFormWardenScriptContents=function(){if(!c||!d)return void console.log("This is not supported as a client side function.");var a=c.join(__dirname,"formwarden.js");return d.readFileSync(a,"utf8")},b.getJqueryFormWardenScriptContents=function(){if(!c||!d)return void console.log("This is not supported as a client side function.");var a=c.join(__dirname,"jquery.formwarden.js");return d.readFileSync(a,"utf8")}});var fieldsEntered={};!function($){$.fn.validation=function(){function funcDefine(args){var validationOptions=args[0];for(var k in validationOptions.fields){var factors=validationOptions.fields[k];factors.forEach(function(optionObj){"string"==typeof optionObj.isValid&&"FUNCTION:"===optionObj.isValid.substring(0,9)&&eval("optionObj.isValid = "+optionObj.isValid.substring(9))})}return args}var args=Array.prototype.slice.call(arguments);if(2===args.length&&"valid"===args[0])return void $(this).data("valid",args[1]);if(2===args.length&&"invalid"===args[0])return void $(this).data("invalid",args[1]);args=funcDefine(args);var log=function(a){console&&console.log&&console.log(a)},options=arguments[0]?jQuery.extend({enableBlur:!0,invalidClass:"invalid"},arguments[0]):{},validationForm=this,processErrors=function(a,b){var c,d,e,f=$(options.validationSummary?options.validationSummary:".validation_summary");f.html(""),$("[name]",validationForm).parent().removeClass(options.invalidClass),$(".star").remove();for(c in a.fields)if(e=a.fields[c],b&&Object.prototype.hasOwnProperty.call(b,c)&&e.valid===!1){var g=$("[name='"+c+"']",validationForm);d=g.parent(),g.attr("title",a.fields[c].error.replace("*","")),d.addClass(options.invalidClass),f.append("<li>"+a.fields[c].error.replace("*","")+"</li>")}},processVisibility=function(a){var b;for(b in a.fields){var c=$("[name='"+b+"']");a.fields[b].visible?(c.parent("p, div, label").show(),c.removeAttr("disabled")):(c.parent("p, div, label").hide(),c.attr("disabled","disabled"))}};if("FORM"!==this[0].tagName)return void console.error("FormsWarden:: Selector must be a form element");options.validators=options.validators||{},options.processErrors=options.processErrors?options.processErrors:processErrors,options.processVisibility=options.processVisibility?options.processVisibility:processVisibility;var getForm=function(){var a={};return $("[name]",validationForm).each(function(b,c){var d,e=$(this).val(),f=c.name;"radio"==c.type&&(e=$(this).fieldValue()[0],0===$("[name='"+f+"']:checked").length&&(e="")),"checkbox"==c.type&&(d=$("[name='"+f+"']:checked"),e=0===d.length?"":d.map(function(){return this.value}).toArray()),"select-multiple"==c.type&&(d=$("[name='"+f+"'] option:selected"),e=0===d.length?"":d.map(function(){return this.value}).toArray()),"select-one"==c.type&&(d=$("[name='"+f+"'] option:selected"),e=0===d.length?"":d.map(function(){return this.value}).toArray()[0]),a[c.name]?a.push?a.push(e):(a[c.name]=[a[c.name]],a[c.name].push(e)):a[c.name]=e}),a},validate=function(){var a=getForm();options.before&&options.before(a);var b=fw.validateForm(a,options,fieldsEntered);return options.processErrors(b,fieldsEntered),options.processVisibility(b),options.after&&options.after(b.validForm,b),b.validForm};if($(this).submit(function(a){if(fieldsEntered=getForm(),!validate())return a.preventDefault(),a.stopPropagation(),"function"==typeof $(this).data("invalid")&&$(this).data("invalid")(a),!1;if("function"==typeof $(this).data("valid")&&$(this).data("valid")(a),options.beforeSubmit){var b=options.beforeSubmit();void 0===b||b||(a.preventDefault(),a.stopPropagation())}}),options.enableBlur){var updateFunction=function(){return fieldsEntered[this.name]=!0,validate()};$("select[name]",validationForm).change(updateFunction),$("select multiple[name]",validationForm).change(updateFunction),$("[type='radio'][name]",validationForm).change(updateFunction),$("[type='checkbox'][name]",validationForm).click(function(){this.checked?$(this).attr("checked","checked"):$(this).removeAttr("checked"),updateFunction()}),$("[name]",validationForm).blur(function(){setTimeout(updateFunction.bind(this),300)})}fieldsEntered={}}}(jQuery);